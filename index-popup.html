<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Savikan Interiors - Invoice</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 11px;
            margin: 20px;
            color: #000;
        }

        .invoice-container {
            width: 800px;
            margin: auto;
            border: 1px solid #000;
        }

        .header-main {
            display: flex;
            border-bottom: 1px solid #000;
        }

        .header-left {
            width: 50%;
            padding: 12px;
            border-right: none;
        }

        .header-right {
            width: 50%;
            padding: 0;
            display: flex;
            flex-direction: column;
        }

        .title-bar {
            text-align: center;
            font-size: 22px;
            color: #2e75b6;
            border-bottom: 1px solid #000;
            padding: 8px;
            font-weight: bold;
            background-color: #fcfcfc;
        }

        .supplier-info h2 {
            margin: 0 0 8px 0;
            font-size: 20px;
            color: #000;
        }

        .supplier-details {
            line-height: 1.5;
            font-size: 11px;
        }

        .metadata-table {
            width: 100%;
            border-collapse: collapse;
            height: 100%;
        }

        .metadata-table td {
            border: none;
            border-bottom: 1px solid #000;
            border-left: 1px solid #000;
            padding: 6px 8px;
            width: 50%;
        }

        .metadata-table tr:last-child td {
            border-bottom: none;
        }

        .label-text {
            display: block;
            font-size: 10px;
            color: #444;
            margin-bottom: 2px;
        }

        .value-text {
            font-weight: bold;
            font-size: 11px;
        }

        .logo-section {
            padding: 10px;
            text-align: right;
            border-bottom: 1px solid #000;
            border-left: 1px solid #000;
        }

        .logo-section img {
            max-width: 140px;
            height: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th,
        td {
            border: 1px solid #000;
            padding: 6px;
            vertical-align: top;
        }

        .buyer-section {
            padding: 12px;
            border-bottom: 1px solid #000;
            line-height: 1.6;
            background-color: #fafafa;
        }

        input {
            border: none;
            font-family: inherit;
            font-size: inherit;
            font-weight: bold;
            width: 100%;
            background: transparent;
        }

        .num-column {
            text-align: right;
        }

        .hsn-summary th {
            background: #f2f2f2;
            font-size: 10px;
        }

        .bank-details {
            display: flex;
            border-top: 1px solid #000;
        }

        .bank-info {
            width: 60%;
            padding: 10px;
            border-right: 1px solid #000;
            line-height: 1.5;
        }

        .signature-area {
            width: 40%;
            text-align: center;
            padding: 10px;
        }

        .sign-img {
            height: 75px;
            margin: 5px 0;
        }

        /* POPUP STYLES */
        #masterModal {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            overflow-y: auto;
        }

        .modal-content {
            background: #fff;
            margin: 2% auto;
            padding: 25px;
            border-radius: 10px;
            width: 700px;
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
        }

        .modal-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .modal-content h2 {
            margin-top: 0;
            color: #2e75b6;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            grid-column: span 2;
        }

        .f-group {
            display: flex;
            flex-direction: column;
            margin-bottom: 10px;
        }

        .f-group label {
            font-size: 10px;
            font-weight: bold;
            color: #666;
            margin-bottom: 3px;
        }

        .f-group input {
            border: 1px solid #ccc !important;
            padding: 8px;
            border-radius: 4px;
            background: #f9f9f9 !important;
        }

        .modal-footer {
            grid-column: span 2;
            text-align: right;
            margin-top: 20px;
            border-top: 1px solid #eee;
            padding-top: 15px;
        }

        .btn-update {
            background: #28a745;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .btn-cancel {
            background: #666;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 10px;
        }

        @media print {
            .no-print {
                display: none !important;
            }

            #masterModal {
                display: none !important;
            }
        }
    </style>
</head>

<body>

    <div class="no-print" style="text-align:center; margin-bottom: 20px; padding: 15px; background: #f0f0f0;">
        <button onclick="openMasterModal()"
            style="padding: 10px 20px; cursor: pointer; background: #e67e22; color: white; border: none; border-radius: 4px; font-weight: bold; margin-right: 10px;">
            1. Edit Full Invoice Details
        </button>
        <button onclick="window.print()"
            style="padding: 10px 20px; cursor: pointer; background: #2e75b6; color: white; border: none; border-radius: 4px; font-weight: bold;">
            2. Print / Download PDF
        </button>
    </div>

    <div id="masterModal">
        <div class="modal-content">
            <div class="modal-grid">
                <h2>Invoice Settings</h2>

                <div class="f-group"><label>Invoice No.</label><input type="text" id="p-inv-no"></div>
                <div class="f-group"><label>Invoice Date</label><input type="text" id="p-inv-date"></div>

                <div class="f-group"><label>Buyer PO No.</label><input type="text" id="p-po-no"></div>
                <div class="f-group"><label>PO Confirmed Date</label><input type="text" id="p-po-date"></div>

                <div class="f-group"><label>Project ID</label><input type="text" id="p-proj-id"></div>
                <div class="f-group"><label>Order ID</label><input type="text" id="p-order-id"></div>

                <div class="f-group" style="grid-column: span 2;"><label>Customer Name</label><input type="text"
                        id="p-cust-name"></div>

                <h2 style="margin-top:20px;">Item & Tax Details</h2>
                <div class="f-group" style="grid-column: span 2;"><label>Service Description</label><input type="text"
                        id="p-desc"></div>
                <div class="f-group"><label>HSN Code</label><input type="text" id="p-hsn"></div>
                <div class="f-group"><label>Quantity</label><input type="number" id="p-qty"></div>
                <div class="f-group"><label>Rate (per unit)</label><input type="number" id="p-rate"></div>
                <div class="f-group"><label>Manual Round-off</label><input type="number" step="0.01" id="p-round"></div>

                <div class="modal-footer">
                    <button class="btn-cancel" onclick="closeMasterModal()">Cancel</button>
                    <button class="btn-update" onclick="applyAllChanges()">Patch & Update Invoice</button>
                </div>
            </div>
        </div>
    </div>

    <div class="invoice-container">
        <div class="title-bar">TAX INVOICE</div>
        <div class="header-main">
            <div class="header-left">
                <div class="supplier-info">
                    <h2>SAVIKAN INTERIORS</h2>
                    <div class="supplier-details">
                        <strong>GSTIN: 27AYLPH4299R1ZC</strong><br>
                        <strong>PAN: AYLPH4299R</strong><br>
                        Madhavsai Apartment, Shivneri colony, Pimple gurav.<br>
                        Maharashtra Code 27, Pune 411061
                    </div>
                </div>
            </div>
            <div class="header-right">
                <div class="logo-section"><img src="images/Logo.jpeg" alt="Logo"></div>
                <table class="metadata-table">
                    <tr>
                        <td><span class="label-text">Invoice No.</span><span class="value-text"><input type="text"
                                    id="inv-no" value="SK/LIV/26/001"></span></td>
                        <td><span class="label-text" style="font-weight:bold;">Supplier's Reference</span><span
                                class="value-text"><input type="text" id="sup-ref" value="."></span></td>
                    </tr>
                    <tr>
                        <td><span class="label-text">Invoice Date</span><span class="value-text"><input type="text"
                                    id="inv-date" value="12-02-2026"></span></td>
                        <td><span class="label-text">Buyer's Order No.</span><span class="value-text"><input type="text"
                                    id="po-no" value="PO-LIV-11269-2025-2026"></span></td>
                    </tr>
                    <tr>
                        <td><span class="label-text">PO Confirmed Date</span><span class="value-text"><input type="text"
                                    id="po-date" value="04-02-2026"></span></td>
                        <td><span class="label-text">Project Id</span><span class="value-text"><input type="text"
                                    id="proj-id" value="4326325"></span></td>
                    </tr>
                    <tr>
                        <td><span class="label-text">Order Id</span><span class="value-text"><input type="text"
                                    id="order-id" value="178378"></span></td>
                        <td><span class="label-text">Customer Name</span><span class="value-text"><input type="text"
                                    id="cust-name" value="Priya Thapa"></span></td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="buyer-section">
            <strong>LIVSPACE INDIA PRIVATE LIMITED</strong> (27AADCH4222R2Z8)<br>
            Pune, Maharashtra, India 411016
        </div>

        <table>
            <thead>
                <tr style="background:#f2f2f2;">
                    <th>Sr.</th>
                    <th>Description</th>
                    <th>HSN</th>
                    <th>Qty</th>
                    <th>Rate</th>
                    <th>Per</th>
                    <th>Amount</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="text-align:center;">1</td>
                    <td><input type="text" id="main-desc" value="Home Interior Services"></td>
                    <td><input type="text" id="main-hsn" value="998724"></td>
                    <td><input type="number" id="main-qty" value="1"></td>
                    <td><input type="number" id="main-rate" value="0.00" class="num-column"></td>
                    <td style="text-align:center;">PCS</td>
                    <td><input type="text" id="main-base-amt" value="0.00" class="num-column" readonly></td>
                </tr>
                <tr>
                    <td colspan="5" rowspan="3"></td>
                    <td style="text-align:right; font-weight:bold;">CGST 9%</td>
                    <td id="d-cgst" class="num-column">0.00</td>
                </tr>
                <tr>
                    <td style="text-align:right; font-weight:bold;">SGST 9%</td>
                    <td id="d-sgst" class="num-column">0.00</td>
                </tr>
                <tr>
                    <td style="text-align:right; font-weight:bold;">Round-off</td>
                    <td><input type="text" id="main-round" class="num-column" value="0.00"></td>
                </tr>
                <tr style="background:#f2f2f2; font-weight:bold;">
                    <td colspan="6" style="text-align:right;">Total</td>
                    <td id="d-total" class="num-column">0.00</td>
                </tr>
            </tbody>
        </table>

        <div style="padding:10px; border-bottom:1px solid #000;">
            <strong>Amount Chargeable:</strong> <span id="words-area" style="font-style:italic;">Zero Only</span>
        </div>

        <table class="hsn-summary">
            <tr>
                <th rowspan="2">HSN</th>
                <th rowspan="2">Taxable</th>
                <th colspan="2">Central Tax</th>
                <th colspan="2">State Tax</th>
                <th rowspan="2">Total Tax</th>
            </tr>
            <tr>
                <th>Rate</th>
                <th>Amt</th>
                <th>Rate</th>
                <th>Amt</th>
            </tr>
            <tr>
                <td id="s-hsn">998724</td>
                <td id="s-taxable">0.00</td>
                <td>9%</td>
                <td id="s-cgst">0.00</td>
                <td>9%</td>
                <td id="s-sgst">0.00</td>
                <td id="s-total-tax">0.00</td>
            </tr>
        </table>

        <div class="bank-details">
            <div class="bank-info">Bank: <strong>HDFC BANK</strong> | A/c: <strong>50200110407875</strong> | IFSC:
                <strong>HDFC0000900</strong>
            </div>
            <div class="signature-area"><em>For SAVIKAN INTERIORS</em><br><img src="images/sign.jpeg"
                    class="sign-img"><br><strong>Authorized Signatory</strong></div>
        </div>
    </div>

    <script>
        function openMasterModal() {
            // Pre-fill popup with current invoice data
            document.getElementById('p-inv-no').value = document.getElementById('inv-no').value;
            document.getElementById('p-inv-date').value = document.getElementById('inv-date').value;
            document.getElementById('p-po-no').value = document.getElementById('po-no').value;
            document.getElementById('p-po-date').value = document.getElementById('po-date').value;
            document.getElementById('p-proj-id').value = document.getElementById('proj-id').value;
            document.getElementById('p-order-id').value = document.getElementById('order-id').value;
            document.getElementById('p-cust-name').value = document.getElementById('cust-name').value;
            document.getElementById('p-desc').value = document.getElementById('main-desc').value;
            document.getElementById('p-hsn').value = document.getElementById('main-hsn').value;
            document.getElementById('p-qty').value = document.getElementById('main-qty').value;
            document.getElementById('p-rate').value = document.getElementById('main-rate').value;
            document.getElementById('p-round').value = document.getElementById('main-round').value;

            document.getElementById('masterModal').style.display = 'block';
        }

        function closeMasterModal() { document.getElementById('masterModal').style.display = 'none'; }

        function applyAllChanges() {
            // 1. Patch Metadata
            document.getElementById('inv-no').value = document.getElementById('p-inv-no').value;
            document.getElementById('inv-date').value = document.getElementById('p-inv-date').value;
            document.getElementById('po-no').value = document.getElementById('p-po-no').value;
            document.getElementById('po-date').value = document.getElementById('p-po-date').value;
            document.getElementById('proj-id').value = document.getElementById('p-proj-id').value;
            document.getElementById('order-id').value = document.getElementById('p-order-id').value;
            document.getElementById('cust-name').value = document.getElementById('p-cust-name').value;

            // 2. Patch Items
            document.getElementById('main-desc').value = document.getElementById('p-desc').value;
            document.getElementById('main-hsn').value = document.getElementById('p-hsn').value;
            document.getElementById('main-qty').value = document.getElementById('p-qty').value;
            document.getElementById('main-rate').value = document.getElementById('p-rate').value;
            document.getElementById('main-round').value = document.getElementById('p-round').value;

            // 3. Trigger Calculations
            calculateAll();
            closeMasterModal();
        }

        function calculateAll() {
            const qty = parseFloat(document.getElementById('main-qty').value) || 0;
            const rate = parseFloat(document.getElementById('main-rate').value) || 0;
            const roundoff = parseFloat(document.getElementById('main-round').value) || 0;
            const taxableValue = qty * rate;

            const cgst = taxableValue * 0.09;
            const sgst = taxableValue * 0.09;
            const total = taxableValue + cgst + sgst + roundoff;

            // Update UI
            document.getElementById('main-base-amt').value = taxableValue.toFixed(2);
            document.getElementById('d-cgst').innerText = cgst.toFixed(2);
            document.getElementById('d-sgst').innerText = sgst.toFixed(2);
            document.getElementById('d-total').innerText = total.toFixed(2);

            // Update Summary Table
            document.getElementById('s-hsn').innerText = document.getElementById('main-hsn').value;
            document.getElementById('s-taxable').innerText = taxableValue.toFixed(2);
            document.getElementById('s-cgst').innerText = cgst.toFixed(2);
            document.getElementById('s-sgst').innerText = sgst.toFixed(2);
            document.getElementById('s-total-tax').innerText = (cgst + sgst).toFixed(2);

            // Words
            document.getElementById('words-area').innerText = numberToWords(Math.round(total)) + " Only";
        }

        function numberToWords(num) {
            var a = ['', 'One ', 'Two ', 'Three ', 'Four ', 'Five ', 'Six ', 'Seven ', 'Eight ', 'Nine ', 'Ten ', 'Eleven ', 'Twelve ', 'Thirteen ', 'Fourteen ', 'Fifteen ', 'Sixteen ', 'Seventeen ', 'Eighteen ', 'Nineteen '];
            var b = ['', '', 'Twenty', 'Thirty', 'Forty', 'Fifty', 'Sixty', 'Seventy', 'Eighty', 'Ninety'];
            if ((num = num.toString()).length > 9) return 'overflow';
            n = ('000000000' + num).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/);
            if (!n) return ''; var str = '';
            str += (n[1] != 0) ? (a[Number(n[1])] || b[n[1][0]] + ' ' + a[n[1][1]]) + 'Crore ' : '';
            str += (n[2] != 0) ? (a[Number(n[2])] || b[n[2][0]] + ' ' + a[n[2][1]]) + 'Lakh ' : '';
            str += (n[3] != 0) ? (a[Number(n[3])] || b[n[3][0]] + ' ' + a[n[3][1]]) + 'Thousand ' : '';
            str += (n[4] != 0) ? (a[Number(n[4])] || b[n[4][0]] + ' ' + a[n[4][1]]) + 'Hundred ' : '';
            str += (n[5] != 0) ? ((str != '') ? 'and ' : '') + (a[Number(n[5])] || b[n[5][0]] + ' ' + a[n[5][1]]) : '';
            return str;
        }
    </script>
</body>

</html>